import{e as le,f as T,g as de,h as me}from"./chunk-XPPBAHDW.js";import{$a as G,Aa as g,Ab as ne,Ba as a,Bb as re,Ca as r,Cb as ae,D as K,Da as p,Ea as s,Fa as c,H as b,Ha as h,Ja as C,K as P,Ka as u,L as x,V as B,Xa as o,Ya as y,Za as U,_ as O,_a as z,a as A,ab as H,b as L,bb as Q,c as j,da as l,db as X,eb as Y,gb as Z,hb as ee,ia as f,ib as D,kb as te,nb as ie,ra as _,sa as v,ua as w,ub as oe,va as F,xa as W,ya as q,za as J}from"./chunk-MLM5G7ON.js";var I=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=f({type:n,selectors:[["app-profile-root"]],decls:13,vars:0,consts:[[1,"app-cmp-nav"],["routerLinkActive","app-st-active"],["routerLink","./view"],[1,"material-symbols-outlined"],["routerLink","./form"]],template:function(e,t){e&1&&(a(0,"nav")(1,"ul",0)(2,"li",1)(3,"a",2)(4,"i",3),o(5,"view_list"),r(),o(6," View "),r()(),a(7,"li",1)(8,"a",4)(9,"i",3),o(10,"edit_document"),r(),o(11," Form "),r()()()(),p(12,"router-outlet"))},dependencies:[re,ae,ne],encapsulation:2,changeDetection:0})};var k=class n{data=te.required();friends=Z(()=>this.data().friends.join(", "));static \u0275fac=function(e){return new(e||n)};static \u0275cmp=f({type:n,selectors:[["app-profile-view"]],inputs:{data:[1,"data"]},decls:23,vars:6,consts:[[1,"_main-data"],[1,"app-cl-code"],[1,"app-cl-number"],[1,"_autobiography"]],template:function(e,t){e&1&&(s(0,"dl",0)(1,"dt"),o(2,"Student ID"),c(),s(3,"dd")(4,"span",1),o(5),c()(),s(6,"dt"),o(7,"Fullname"),c(),s(8,"dd"),o(9),c(),s(10,"dt"),o(11,"Age"),c(),s(12,"dd")(13,"span",2),o(14),c()(),s(15,"dt"),o(16,"Autobiography"),c(),s(17,"dd",3),o(18),c(),s(19,"dt"),o(20,"Friends"),c(),s(21,"dd"),o(22),c()()),e&2&&(l(5),y(t.data().studentId),l(4),z("",t.data().firstname," ",t.data().lastname),l(5),y(t.data().age),l(4),y(t.data().autobiography),l(4),y(t.friends()))},encapsulation:2,changeDetection:0})};var ce="profile-data",E=class n{keyName=`${b(O)}-${ce}`;async get(){return JSON.parse(localStorage.getItem(this.keyName)??"null")}async set(i){return localStorage.setItem(this.keyName,JSON.stringify(i))}static \u0275fac=function(e){return new(e||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})};function fe(n,i){n&1&&p(0,"app-profile-view",0),n&2&&g("data",i)}function ue(n,i){n&1&&(a(0,"p",1)(1,"i",2),o(2,"warning"),r(),o(3," Not Found!!! "),r())}function ge(n,i){if(n&1&&w(0,fe,1,1,"app-profile-view",0)(1,ue,4,0,"p",1),n&2){let e,t=u();F((e=t.dataResource.value())?0:1,e)}}var N=class n{dataStorage=b(E);dataResource=D({loader:async()=>await this.dataStorage.get()});static \u0275fac=function(e){return new(e||n)};static \u0275cmp=f({type:n,selectors:[["app-profile-view-page"]],decls:1,vars:1,consts:[[3,"data"],[1,"_message"],[1,"material-symbols-outlined"]],template:function(e,t){e&1&&w(0,ge,2,1),e&2&&F(t.dataResource.hasValue()?0:-1)},dependencies:[k],encapsulation:2,changeDetection:0})};function $(){return""}function pe(){return{studentId:"",firstname:"",lastname:"",age:0,autobiography:"",friends:[$()]}}function _e(n,i){if(n&1){let e=h();a(0,"div",10)(1,"button",11),C("click",function(){let d=P(e).$index,m=u();return x(m.moveFriend(d,-1))}),a(2,"i",9),o(3,"arrow_upward_alt"),r()(),a(4,"button",11),C("click",function(){let d=P(e).$index,m=u();return x(m.moveFriend(d,1))}),a(5,"i",9),o(6,"arrow_downward_alt"),r()(),a(7,"span",12)(8,"label")(9,"b"),o(10," Friend "),a(11,"span",13),o(12),r()(),p(13,"input",3),_(),r()(),a(14,"button",14),C("click",function(){let d=P(e).$index,m=u();return x(m.removeFriend(d))}),a(15,"i",9),o(16,"delete_forever"),r()()()}if(n&2){let e=i.$implicit,t=i.$index,d=i.$index,m=i.$count,se=i.$count;l(),g("disabled",d===0),l(3),g("disabled",d===se-1),l(8),y(t+1),l(),v(e,"formField"),l(),g("disabled",m===1)}}var R=class n{data=ie.required();model=ee(()=>{let t=this.data(),{friends:i}=t,e=j(t,["friends"]);return L(A({},e),{friends:i.map(d=>({value:d}))})});friendsCountKey=T();friendUcNameKey=T();form=de(this.data,i=>{le(i.friends,this.friendsCountKey,({value:e})=>e().length)});addFriend(){this.form.friends().value.update(i=>[...i,$()])}removeFriend(i){this.form.friends().value.update(e=>e.filter((t,d)=>d!==i))}moveFriend(i,e){this.form.friends().value.update(t=>t.map((d,m)=>m===i?t[i+e]:m===i+e?t[i]:d))}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=f({type:n,selectors:[["app-profile-form"]],inputs:{data:[1,"data"]},outputs:{data:"dataChange"},decls:33,vars:15,consts:[[1,"_main-form",3,"disabled"],[1,"_info-form"],["type","text","inputmode","numeric",3,"formField"],["type","text",3,"formField"],["type","number",3,"formField"],["rows","5",3,"formField"],[1,"_friends-form",3,"disabled"],[1,"app-cl-number"],["type","button",1,"app-cmp-button",3,"click"],[1,"material-symbols-outlined"],[1,"_friend-container"],["type","button",1,"app-cmp-button",3,"click","disabled"],[1,"_friend-input"],[1,"_friend-title-no","app-cl-number"],["type","button",1,"app-cmp-button","app-cl-warn",3,"click","disabled"]],template:function(e,t){e&1&&(a(0,"fieldset",0)(1,"div",1)(2,"label")(3,"b"),o(4,"Student ID"),r(),p(5,"input",2),_(),r(),a(6,"label")(7,"b"),o(8,"Firstname"),r(),p(9,"input",3),_(),r(),a(10,"label")(11,"b"),o(12,"Lastname"),r(),p(13,"input",3),_(),r(),a(14,"label")(15,"b"),o(16,"Age"),r(),p(17,"input",4),_(),r(),a(18,"label")(19,"b"),o(20,"Autobiography"),r(),p(21,"textarea",5),_(),r()(),a(22,"fieldset",6)(23,"legend"),o(24," Friends "),a(25,"span",7),o(26),X(27,"number"),r(),a(28,"button",8),C("click",function(){return t.addFriend()}),a(29,"i",9),o(30,"add"),r()()(),q(31,_e,17,6,"div",10,W),r()()),e&2&&(g("disabled",t.form().disabled()),l(5),v(t.form.studentId,"formField"),l(4),v(t.form.firstname,"formField"),l(4),v(t.form.lastname,"formField"),l(4),v(t.form.age,"formField"),l(4),v(t.form.autobiography,"formField"),l(),g("disabled",t.form.friends().disabled()),l(4),U("(",Y(27,13,t.form.friends().metadata(t.friendsCountKey)()),")"),l(5),J(t.form.friends))},dependencies:[me,oe],encapsulation:2,changeDetection:0})};function ve(n,i){if(n&1){let e=h();a(0,"app-profile-form",1),Q("dataChange",function(d){P(e);let m=u();return H(m.dataResource.value,d)||(m.dataResource.value=d),x(d)}),r()}if(n&2){let e=u();G("data",e.dataResource.value)}}var M=class n{dataStorage=b(E);dataResource=D({loader:async()=>await this.dataStorage.get()??pe()});constructor(){B(()=>{this.dataResource.hasValue()&&this.dataStorage.set(this.dataResource.value())})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=f({type:n,selectors:[["app-profile-form-page"]],decls:1,vars:1,consts:[[3,"data"],[3,"dataChange","data"]],template:function(e,t){e&1&&w(0,ve,1,1,"app-profile-form",0),e&2&&F(t.dataResource.hasValue()?0:-1)},dependencies:[R],encapsulation:2,changeDetection:0})};var Ye=[{path:"",component:I,children:[{path:"",redirectTo:"view",pathMatch:"full"},{path:"view",component:N},{path:"form",component:M}]}];export{Ye as default};
